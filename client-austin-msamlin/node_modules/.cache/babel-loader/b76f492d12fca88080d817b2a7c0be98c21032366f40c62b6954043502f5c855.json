{"ast":null,"code":"import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\nimport { logOut } from '../../features/auth/authSlice';\nconst baseQuery = fetchBaseQuery({\n  baseUrl: 'http://localhost:3333',\n  credentials: 'include'\n  // prepareHeaders: (headers, { getState}) => {\n  // \t\tconst state = getState() as RootState\n  // \t\tconst token = state.auth.token\n  // \t\tif (token) {\n  // \t\t\t\theaders.set(\"authorization\", `Bearer ${token}`)\n  // \t\t}\n  // \t\treturn headers\n  // }\n});\nconst baseQueryWithReauth = async (args, api, extraOptions) => {\n  console.log({\n    args,\n    api,\n    extraOptions\n  });\n  let result = await baseQuery(args, api, extraOptions);\n  if (result.error) {\n    api.dispatch(logOut());\n  }\n  return result;\n};\nexport const apiSlice = createApi({\n  baseQuery: baseQueryWithReauth,\n  endpoints: builder => ({})\n});","map":{"version":3,"names":["createApi","fetchBaseQuery","logOut","baseQuery","baseUrl","credentials","baseQueryWithReauth","args","api","extraOptions","console","log","result","error","dispatch","apiSlice","endpoints","builder"],"sources":["/Users/anwaukoni/Desktop/Dev/client-austin-msamlin/src/app/api/apiSlice.ts"],"sourcesContent":["import { BaseQueryApi, FetchArgs, createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react'\nimport { logOut } from '../../features/auth/authSlice'\nimport { RootState } from '../store'\n\nconst baseQuery = fetchBaseQuery({\n\tbaseUrl: 'http://localhost:3333',\n\tcredentials: 'include',\n\t// prepareHeaders: (headers, { getState}) => {\n\t// \t\tconst state = getState() as RootState\n\t// \t\tconst token = state.auth.token\n\t// \t\tif (token) {\n\t// \t\t\t\theaders.set(\"authorization\", `Bearer ${token}`)\n\t// \t\t}\n\t// \t\treturn headers\n\t// }\n})\n\nconst baseQueryWithReauth = async (args: string | FetchArgs, api: BaseQueryApi, extraOptions: {}) => {\n\n\tconsole.log({args, api, extraOptions})\n\tlet result = await baseQuery(args, api, extraOptions)\n\n\tif (result.error) {\n\t\t\tapi.dispatch(logOut())\n\t}\n\t\n\treturn result;\n}\n\nexport const apiSlice = createApi({\n    baseQuery: baseQueryWithReauth,\n    endpoints: builder => ({})\n})"],"mappings":"AAAA,SAAkCA,SAAS,EAAEC,cAAc,QAAQ,8BAA8B;AACjG,SAASC,MAAM,QAAQ,+BAA+B;AAGtD,MAAMC,SAAS,GAAGF,cAAc,CAAC;EAChCG,OAAO,EAAE,uBAAuB;EAChCC,WAAW,EAAE;EACb;EACA;EACA;EACA;EACA;EACA;EACA;EACA;AACD,CAAC,CAAC;AAEF,MAAMC,mBAAmB,GAAG,MAAAA,CAAOC,IAAwB,EAAEC,GAAiB,EAAEC,YAAgB,KAAK;EAEpGC,OAAO,CAACC,GAAG,CAAC;IAACJ,IAAI;IAAEC,GAAG;IAAEC;EAAY,CAAC,CAAC;EACtC,IAAIG,MAAM,GAAG,MAAMT,SAAS,CAACI,IAAI,EAAEC,GAAG,EAAEC,YAAY,CAAC;EAErD,IAAIG,MAAM,CAACC,KAAK,EAAE;IAChBL,GAAG,CAACM,QAAQ,CAACZ,MAAM,CAAC,CAAC,CAAC;EACxB;EAEA,OAAOU,MAAM;AACd,CAAC;AAED,OAAO,MAAMG,QAAQ,GAAGf,SAAS,CAAC;EAC9BG,SAAS,EAAEG,mBAAmB;EAC9BU,SAAS,EAAEC,OAAO,KAAK,CAAC,CAAC;AAC7B,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}